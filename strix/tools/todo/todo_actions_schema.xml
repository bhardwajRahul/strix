<tools>
  <important>
  YOU MUST USE THE TODO TOOL EXTENSIVELY â€” AND DO SO IN BATCHES. Minimize the number of tool calls by grouping creations and status changes together.

  IMPORTANT: Each subagent has their own separate todo list. Your todos are private to you and
  do not interfere with other agents' todos. Use this to your advantage.

  WORKFLOW - Follow this for EVERY task:
  1. Keep the list short-horizon: track only the next few concrete steps (3-6 max), not long-term goals.
  2. Create/update todos as you learn new info; drop or rewrite items when plans change.
  3. Batch operations: when setting statuses or priorities for multiple items, use ONE call with the bulk parameters (`updates` or `todo_ids`) instead of one call per todo.
  4. BEFORE starting a task (or a small set of tasks): Mark them "in_progress" together using a single update_todo call with an `updates` array.
  5. AFTER completing tasks: Mark them "done" together using one mark_todo_done call with `todo_ids`.
  6. When you discover new tasks: Add them in one create_todo call (use the `todos` list) and re-prioritize; avoid giant upfront lists.

  ALWAYS mark the current task(s) as in_progress before working on them. This shows what you're actively doing. Then mark them done when finished. Do these status updates in batches to avoid excessive tool calls.

  A well-maintained todo list prevents you from going in circles, forgetting important tasks,
  or losing track of your progress. USE IT CONSTANTLY.
  </important>

  <tool name="create_todo">
    <description>Create a new todo item to track tasks, goals, and progress. USE THIS FREQUENTLY.</description>
    <details>Use this tool liberally to create actionable items. Break down complex tasks into smaller,
  manageable todos. Each subagent maintains their own independent todo list - your todos are yours alone.

  Create todos at the start of work to plan your approach, add new ones as you discover tasks,
  and mark them done as you progress. This keeps you focused, prevents you from forgetting tasks,
  and provides a clear record of what you've accomplished.</details>
    <parameters>
      <parameter name="title" type="string" required="false">
        <description>Short, actionable title for the todo (e.g., "Test login endpoint for SQL injection")</description>
      </parameter>
      <parameter name="todos" type="string" required="false">
        <description>Create multiple todos at once. Provide a JSON array of {"title": "...", "description": "...", "priority": "..."} objects or a newline-separated bullet list.</description>
      </parameter>
      <parameter name="description" type="string" required="false">
        <description>Detailed description or notes about the task</description>
      </parameter>
      <parameter name="priority" type="string" required="false">
        <description>Priority level: "low", "normal", "high", "critical" (default: "normal")</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - created: List of created todos with their IDs - todos: Full sorted todo list - success: Whether the operation succeeded</description>
    </returns>
    <examples>
  # Create a high priority todo
  <function=create_todo>
  <parameter=title>Test authentication bypass on /api/admin</parameter>
  <parameter=description>The admin endpoint seems to have weak authentication. Try JWT manipulation, session fixation, and privilege escalation.</parameter>
  <parameter=priority>high</parameter>
  </function>

  # Create a simple todo
  <function=create_todo>
  <parameter=title>Enumerate all API endpoints</parameter>
  </function>

  # Bulk create todos (JSON array)
  <function=create_todo>
  <parameter=todos>[{"title": "Map all admin routes", "priority": "high"}, {"title": "Check forgotten password flow"}]</parameter>
  </function>

  # Bulk create todos (bullet list)
  <function=create_todo>
  <parameter=todos>
  - Capture baseline traffic in proxy
  - Enumerate S3 buckets for leaked assets
  - Compare responses for timing differences
  </parameter>
  </function>
    </examples>
  </tool>

  <tool name="list_todos">
    <description>List all todos with optional filtering by status or priority. CHECK THIS OFTEN.</description>
  <details>Use this when you need fresh IDs or to reprioritize. Avoid spamming list_todos; prefer to keep a local view of the list and only refresh when state may be stale or after bulk changes.
  The list is sorted: done first, then in_progress, then pending. Within each status, sorted by priority (critical > high > normal > low).
  Each subagent has their own independent todo list.</details>
    <parameters>
      <parameter name="status" type="string" required="false">
        <description>Filter by status: "pending", "in_progress", "done"</description>
      </parameter>
      <parameter name="priority" type="string" required="false">
        <description>Filter by priority: "low", "normal", "high", "critical"</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - todos: List of todo items - total_count: Total number of todos - summary: Count by status (pending, in_progress, done)</description>
    </returns>
    <examples>
  # List all todos
  <function=list_todos>
  </function>

  # List only pending todos
  <function=list_todos>
  <parameter=status>pending</parameter>
  </function>

  # List high priority items
  <function=list_todos>
  <parameter=priority>high</parameter>
  </function>
    </examples>
  </tool>

  <tool name="update_todo">
  <description>Update one or multiple todo items. ALWAYS prefer bulk updates in a single call.</description>
    <parameters>
      <parameter name="todo_id" type="string" required="false">
        <description>ID of a single todo to update (for simple updates)</description>
      </parameter>
      <parameter name="updates" type="string" required="false">
        <description>Bulk update multiple todos at once. JSON array of objects with todo_id and fields to update: [{"todo_id": "abc", "status": "done"}, {"todo_id": "def", "priority": "high"}]. USE THIS INSTEAD OF multiple single-item calls.</description>
      </parameter>
      <parameter name="title" type="string" required="false">
        <description>New title (used with todo_id)</description>
      </parameter>
      <parameter name="description" type="string" required="false">
        <description>New description (used with todo_id)</description>
      </parameter>
      <parameter name="priority" type="string" required="false">
        <description>New priority: "low", "normal", "high", "critical" (used with todo_id)</description>
      </parameter>
      <parameter name="status" type="string" required="false">
        <description>New status: "pending", "in_progress", "done" (used with todo_id)</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - updated: List of updated todo IDs - updated_count: Number updated - todos: Full sorted todo list - errors: Any failed updates</description>
    </returns>
    <examples>
  # Single update
  <function=update_todo>
  <parameter=todo_id>abc123</parameter>
  <parameter=status>in_progress</parameter>
  </function>

  # Bulk update - mark multiple todos with different statuses in ONE call
  <function=update_todo>
  <parameter=updates>[{"todo_id": "abc123", "status": "done"}, {"todo_id": "def456", "status": "in_progress"}, {"todo_id": "ghi789", "priority": "critical"}]</parameter>
  </function>
    </examples>
  </tool>

  <tool name="mark_todo_done">
  <description>Mark one or multiple todos as completed in a single call. DO THIS IN BATCHES after finishing a small group of tasks.</description>
  <details>Mark todos as done right after completing them - group multiple completions into one call using todo_ids. Avoid one-call-per-item to save tool calls. This keeps your list accurate and gives you a clear picture of progress.</details>
    <parameters>
      <parameter name="todo_id" type="string" required="false">
        <description>ID of a single todo to mark as done</description>
      </parameter>
      <parameter name="todo_ids" type="string" required="false">
        <description>Mark multiple todos done at once. JSON array of IDs: ["abc123", "def456"] or comma-separated: "abc123, def456"</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - marked_done: List of IDs marked done - marked_count: Number marked - todos: Full sorted list - errors: Any failures</description>
    </returns>
    <examples>
  # Mark single todo done
  <function=mark_todo_done>
  <parameter=todo_id>abc123</parameter>
  </function>

  # Mark multiple todos done in ONE call
  <function=mark_todo_done>
  <parameter=todo_ids>["abc123", "def456", "ghi789"]</parameter>
  </function>
    </examples>
  </tool>

  <tool name="mark_todo_pending">
    <description>Mark one or multiple todos as pending (reopen completed tasks).</description>
    <details>Use this to reopen tasks that were marked done but need more work. Supports bulk operations.</details>
    <parameters>
      <parameter name="todo_id" type="string" required="false">
        <description>ID of a single todo to mark as pending</description>
      </parameter>
      <parameter name="todo_ids" type="string" required="false">
        <description>Mark multiple todos pending at once. JSON array of IDs: ["abc123", "def456"] or comma-separated: "abc123, def456"</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - marked_pending: List of IDs marked pending - marked_count: Number marked - todos: Full sorted list - errors: Any failures</description>
    </returns>
    <examples>
  # Mark single todo pending
  <function=mark_todo_pending>
  <parameter=todo_id>abc123</parameter>
  </function>

  # Mark multiple todos pending in ONE call
  <function=mark_todo_pending>
  <parameter=todo_ids>["abc123", "def456"]</parameter>
  </function>
    </examples>
  </tool>

  <tool name="delete_todo">
    <description>Delete one or multiple todos in a single call.</description>
    <details>Use this to remove todos that are no longer relevant. Supports bulk deletion to save tool calls.</details>
    <parameters>
      <parameter name="todo_id" type="string" required="false">
        <description>ID of a single todo to delete</description>
      </parameter>
      <parameter name="todo_ids" type="string" required="false">
        <description>Delete multiple todos at once. JSON array of IDs: ["abc123", "def456"] or comma-separated: "abc123, def456"</description>
      </parameter>
    </parameters>
    <returns type="Dict[str, Any]">
      <description>Response containing: - deleted: List of deleted IDs - deleted_count: Number deleted - todos: Remaining todos - errors: Any failures</description>
    </returns>
    <examples>
  # Delete single todo
  <function=delete_todo>
  <parameter=todo_id>abc123</parameter>
  </function>

  # Delete multiple todos in ONE call
  <function=delete_todo>
  <parameter=todo_ids>["abc123", "def456", "ghi789"]</parameter>
  </function>
    </examples>
  </tool>
</tools>
